{{ define "main" }}
<div class="max-w-7xl mx-auto px-4 py-8 bg-main text-main">
  <div class="flex flex-col lg:flex-row gap-8">

    <!-- Main Content -->
    <div class="lg:w-2/3">

      <!-- Header -->
      <div class="text-center mb-12 opacity-0" data-animate-on-scroll>
        <h1 class="text-4xl font-bold text-main mb-4">
          Latest Blog Posts
        </h1>
        <p class="text-lg text-muted max-w-2xl mx-auto">
          Discover insights, tutorials, and guides on web development, Hugo, and modern web technologies.
        </p>
      </div>

      <!-- Posts -->
      {{ $paginator := .Paginate .Site.RegularPages }}
      <div class="space-y-6">
        {{ range $paginator.Pages }}
          <article class="card opacity-0 flex flex-col lg:flex-row gap-6" data-animate-on-scroll>
            {{ with .Params.thumbnail }}
              <div class="lg:w-1/3">
                <img
                  src="{{ . }}"
                  alt="{{ $.Title }}"
                  class="card-header-img w-full h-48 object-cover rounded-lg"
                  loading="lazy"
                >
              </div>
            {{ end }}
            
            <div class="lg:w-2/3">
              <h2 class="card-title mb-2">
                <a href="{{ .RelPermalink }}">{{ .Title }}</a>
              </h2>

              <div class="card-meta mb-3">
                <time datetime="{{ .Date.Format "2006-01-02" }}">
                  {{ .Date.Format "January 2, 2006" }}
                </time>

                {{ with .Params.readingTime }}
                  <span>• {{ . }}</span>
                {{ end }}
              </div>

              <p class="text-main text-sm leading-relaxed mb-4">
                {{ .Summary | truncate 150 "..." }}
              </p>

              <div class="card-footer flex flex-wrap items-center justify-between">
                <a href="{{ .RelPermalink }}" class="font-medium">
                  Read more →
                </a>

                {{ with .Params.tags }}
                  <div class="flex flex-wrap gap-1">
                    {{ range first 2 . }}
                      <a href="/tags/{{ . | urlize }}" class="bg-muted text-main text-xs px-2 py-0.5 rounded transition-colors duration-200 hover:bg-blue-600 hover:text-white dark:hover:bg-blue-700 dark:hover:text-white">
                        #{{ . }}
                      </a>
                    {{ end }}
                  </div>
                {{ end }}
              </div>
            </div>
          </article>
        {{ end }}
      </div>

      <!-- Pagination -->
      {{ if gt $paginator.TotalPages 1 }}
        <div class="mt-12">
          {{ partial "pagination.html" . }}
        </div>
      {{ end }}

    </div>

    <!-- Sidebar -->
    <aside class="lg:w-1/3">
      <div class="sticky top-24 space-y-8">

        <!-- About -->
        <div class="card">
          <h3 class="card-title mb-3">About This Blog</h3>
          <p class="text-main mb-4">
            Welcome to our technical blog where we share insights on web development,
            static site generators, and modern web technologies.
          </p>
          <a href="/about/" class="font-medium">
            Learn more →
          </a>
        </div>

        <!-- Categories -->
        <div class="card">
          <h3 class="card-title mb-3">Categories</h3>
          <div class="space-y-2">
            {{ range .Site.Taxonomies.categories }}
              <a href="{{ .Page.RelPermalink }}"
                 class="flex justify-between items-center border-b border-main py-2">
                <span class="text-main">{{ .Page.Title }}</span>
                <span class="bg-muted text-main text-xs px-2 py-0.5 rounded-full">
                  {{ .Count }}
                </span>
              </a>
            {{ end }}
          </div>
        </div>

        <!-- Tags -->
        <div class="card">
          <h3 class="card-title mb-3">Popular Tags</h3>
          <div class="flex flex-wrap gap-2">
            {{ range .Site.Taxonomies.tags.ByCount }}
              <a href="/tags/{{ .Page.Title | urlize }}"
                 class="bg-muted text-main text-sm px-3 py-1 rounded-full hover:bg-blue-600 hover:text-white transition-colors duration-200">
                #{{ .Page.Title }}
              </a>
            {{ end }}
          </div>
        </div>

        <!-- Newsletter -->
        <div class="card">
          <h3 class="card-title mb-3">Subscribe</h3>
          <p class="text-main mb-4">
            Get the latest posts delivered straight to your inbox.
          </p>
          <form class="space-y-3">
            <input
              name="email"
              type="email"
              placeholder="Your email address"
              autocomplete="email"
              maxlength="255"
              class="w-full px-4 py-2 rounded border border-main bg-main text-main"
            />
            <button
              type="submit"
              class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded font-medium">
              Subscribe
            </button>
          </form>
        </div>
      </div>
    </aside>
  </div>
</div>
{{ end }}
